"use client";
"use strict";const o=require("@storyblok/js"),l=require("react"),s=require("../utils.js"),u=({story:t=null,bridgeOptions:r={}})=>{if(!s.isVisualEditor())return null;const n=(t==null?void 0:t.id)??0;return l.useEffect(()=>{(async()=>{s.isBridgeLoaded()||await o.loadStoryblokBridge();const c=async i=>{var a;if(i)try{const{liveEditUpdateAction:e}=await Promise.resolve().then(()=>require("./live-edit-update-action.js"));l.startTransition(()=>{e({story:i,pathToRevalidate:window.location.pathname})})}catch(e){console.warn("Server action not available, caching story locally:",e),i.uuid&&((a=globalThis.storyCache)==null||a.set(i.uuid,i))}};o.registerStoryblokBridge(n,i=>c(i),r)})()},[n,JSON.stringify(r)]),null};module.exports=u;
